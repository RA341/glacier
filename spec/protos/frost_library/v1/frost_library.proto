syntax = "proto3";

package frost_library.v1;

option go_package = "github.com/ra341/glacier/generated/frost_library/v1";

service FrostLibraryService {
  rpc Get(GetRequest) returns (GetResponse) {}
  rpc Delete(DeleteRequest) returns (DeleteResponse) {}
  rpc ListFiles(ListFilesRequest) returns (ListFilesResponse) {}

  rpc ListDownloading(ListDownloadingRequest) returns (ListDownloadingResponse) {}
  rpc Download(DownloadRequest) returns (DownloadResponse) {}
}

message ListFilesRequest {
  uint64 id = 1;
  string path = 2;
}

message ListFilesResponse {}

message GetRequest {
  uint64 id = 1;
}

message LocalGame {
  uint64 ID = 1;

  string DownloadPath = 2;
  string InstallerPath = 3;
  string ExePath = 4;

  string Status = 5;
  string StatusMessage = 6;
}

message GetResponse {
  LocalGame lg = 1;
}

message DeleteRequest {
  uint64 id = 1;
}

message DeleteResponse {}

message DownloadRequest {
  int64 gameId = 1;
  string downloadFolder = 2;
}

message DownloadResponse {}


message ListDownloadingRequest {}

message FileProgress {
  string Name = 1;
  uint64 Complete = 2;
  uint64 Left = 3;
}

message FolderProgress {
  int64 Complete = 1;
  int64 Left = 2;
  repeated FileProgress files = 3;
}

message DownloadProgress {
  string Thumbnail = 1;
  string Title = 2;
  DownloadInf download  = 3;
  FolderProgress progress = 4;
}

message DownloadInf {
  string State = 1;
  string Message = 2;
  string TimeStarted = 3;
  string DownloadPath = 4;
}

message ListDownloadingResponse {
  repeated DownloadProgress downloads = 1;
}
