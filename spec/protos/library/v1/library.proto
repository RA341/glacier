syntax = "proto3";

package library.v1;

option go_package = "github.com/ra341/glacier/generated/library/v1";

import "search/v1/search.proto";

service LibraryService {
  rpc List(ListRequest) returns (ListResponse) {}
  rpc ListWithState(ListWithStateRequest) returns (ListWithStateResponse) {}
  rpc Delete(DeleteRequest) returns (DeleteResponse) {}

  rpc TriggerTracker(TriggerTrackerRequest) returns (TriggerTrackerResponse) {}
  rpc GetGame(GetGameRequest) returns (GetGameResponse) {}


  rpc Add(AddRequest) returns (AddResponse) {}
}


message DeleteRequest {
  int64 gameId = 1;
}

message DeleteResponse {}


message ListWithStateRequest {
  string state  = 1;
}

message ListWithStateResponse {
  repeated Game game = 1;
}


message GetGameRequest {
  uint64 gameId = 1;
}

message GetGameResponse {
    Game game = 1;
}


message TriggerTrackerRequest {}

message TriggerTrackerResponse {}

message ListRequest {
  string query = 1;
  uint32 offset = 2;
  uint32 limit = 3;
}

message ListResponse {
  repeated Game gameList = 1;
}

message AddRequest {
  Game game = 1;
}

message Game {
  uint64 ID = 1;
  string CreatedAt = 2;
  string EditedAt = 3;
  Download DownloadState = 7;
  search.v1.GameMetadata Meta = 4;
  search.v1.GameSource Source = 8;
}

message Download {
  string Client = 1;
  string DownloadId = 2;
  string State = 3;
  string Progress = 4;
  uint64 Complete = 7;
  uint64 Left = 8;

  string DownloadPath = 5;
  string DownloadUrl = 6;
}

message AddResponse {}

